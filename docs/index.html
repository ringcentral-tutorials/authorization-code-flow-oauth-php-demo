<!DOCTYPE html><html><head><title>RingCentral Authorization Code Flow OAuth - PHP- RingCentral Developer Tutorials</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="72x72" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="apple-touch-icon" sizes="114x114" href="https://developers.ringcentral.com/assets/images/favicon.ico?v=20161209-1544"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/jquery-ui@1.12.1/themes/base/all.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div class="dpw-header-container"><div class="dpw-header center-section"><div class="logo"><a href="https://developers.ringcentral.com" class="logo-link"></a></div><div class="nav-top-menus"></div><div class="dpw-login-section"><a href="https://developer.ringcentral.com/login.html#/">Sign in | Sign up</a></div></div></div><div id="viewsaurus" data-title="RingCentral Authorization Code Flow OAuth - PHP"><div class="saurus-panes"><div class="saurus-panes-header"><a href="https://ringcentral.github.io/tutorials/" class="saurus-back-to-tutorials">Tutorials</a><span>&gt;</span><span>RingCentral Authorization Code Flow OAuth - PHP</span></div><div class="saurus-prose"><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw icon-menu"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>In this step-by-step tutorial, you are going to learn how to authorize a user to login RingCentral platform using the authorization code flow. Click the &quot;Start&quot; button below to start the tutorial.</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="RingCentral Platform Authentication - Authorization Code Flow OAuth" class="chapter"><div data-title="Clone and Setup the project" data-file="../README.md" data-highlight="9-19" class="step"><h3 id="clone-and-setup-the-project">Clone and Setup the project</h3>
<p>Clone the project from GitHub and install RingCentral PHP SDK and dependencies.</p>
</div><div data-title="Create a RingCentral app" data-file="../README.md" data-highlight="25-35" class="step"><h3>Create a RingCentral app</h3><p>The first thing we need to do is create an app in the RingCentral Developer Portal.</p><p>If you don't know how to create a RingCentral app. Click <a href="https://developer.ringcentral.com/library/getting-started.html">here</a> for instructions.</p></div><div data-title="Set Environment Variables" data-file="../environment/dotenv-sandbox" class="step"><h3 id="set-environment-variables">Set Environment Variables</h3>
<p>Copy the Client id and Client secret and add them to the <code>.env-sandbox</code> file.</p>
<pre><code>RC_CLIENT_ID=
RC_CLIENT_SECRET=
</code></pre><p>If you want to specify variables for your production environment, repeat this step for the <code>.env-production</code> file.</p>
</div><div data-title="Implement the main page" data-file="../index.php" data-highlight="1-21" class="step"><h3 id="implement-the-main-page">Implement the main page</h3>
<p>We create a main page with login options to login a production account or a sandbox account.</p>
</div><div data-title="Implement the login page" data-file="../login.php" class="step"><h3 id="implement-the-login-page">Implement the <code>login</code> page</h3>
<p>When a user clicks the login link from the mail page, we add the selected environment value to the <code>env</code> query parameter.</p>
<p>To construct the login page, we do the following steps:</p>
<ul>
<li><p>Check the query <code>$_REQUEST[&#39;env&#39;]</code> parameter to identify which environment was selected and load our app credentials accordingly.</p>
</li>
<li><p>Save the selected environment to the session so we can use it later.</p>
</li>
<li><p>Load the SDK and create an instance of the SDK, passing the app credentials and assign to the <code>$rcsdk</code> variable.</p>
</li>
<li><p>Get the <code>$platform</code> instance from the SDK and call the <code>$platform-&gt;authUrl()</code> function to generate the <code>$authorize_uri</code>.</p>
</li>
<li><p>Create the login page with the <code>$authorize_uri</code> and the <code>$redirect_uri</code> assigned as shown on the codes beside.</p>
</li>
</ul>
<p>The login page is just an empty page with JavaScript codes to launch the pop-up RingCentral login window.</p>
<p>After login successfully, we will close the popup window and launch the test page.</p>
</div><div data-title="Implement HTTP routes handling" data-file="../engine.php" data-highlight="1-20" class="step"><h3 id="load-the-ringcentral-php-sdk">Load the RingCentral PHP SDK</h3>
<p>Let&#39;s create a file named <code>engine.php</code> to implement the <code>oauth2callback</code> route and handle our test cases later on.</p>
<p>Using a RingCentral SDK is the most convenient way to authenticate and access RingCentral platform services.</p>
<p>We load the the RingCentral SDK and check the selected environment we saved in the session <code>$_SESSION[&#39;env&#39;]</code>. Then we create an instance of the SDK, passing the app credentials and assign to the <code>$rcsdk</code> variable.</p>
<p>We also get the <code>$platform</code> instance from the SDK because we&#39;ll use it later.</p>
</div><div data-title="Implement the oauth2callback route" data-file="../engine.php" data-highlight="22-35" class="step"><h3 id="implement-the-oauth2callback-route">Implement the <code>oauth2callback</code> route</h3>
<p>We specified the redirect Uri as <code>http://localhost:5000/engine.php?oauth2callback</code> in our app and we passed the
<code>redirect_uri</code> in the authentication query. If the redirect URIs match, RingCentral will send a request
with the authorization code to this route.</p>
<p>To start login with the authorization code, we read the <code>code</code> sent from RingCentral and use the <code>$platform-&gt;login()</code> function to login with parameters set as shown on the codes beside.</p>
<p>If we login successfully, we will save the token info from <code>tokens</code> to a session and send a &quot;login success&quot; message to the caller.</p>
</div><div data-title="Implement the test page" data-file="../test.php" data-highlight="1-15" class="step"><h3 id="implement-the-test-page">Implement the test page</h3>
<p>Let&#39;s create a file named <code>test.php</code> add a few test cases and the logout option to the test page.</p>
</div><div data-title="Implement the test route" data-file="../engine.php" data-highlight="35-78" class="step"><h3 id="implement-the-test-route">Implement the <code>test</code> route</h3>
<p>To call a RingCentral API using the <code>$platform</code> instance, we do the following steps:</p>
<ul>
<li><p>Check if the <code>tokens</code> was set in the session. If the <code>tokens</code> does not exist, we redirect to the main page to force a user login again..</p>
</li>
<li><p>Call the <code>$platform-&gt;auth()-&gt;setData()</code> function to set the <code>tokens</code> we saved in the session.</p>
</li>
<li><p>Call the <code>$platform-&gt;loggedIn()</code> to check if we are still logged in or not. If we are no longer
logged in (access token and refresh token expired), we redirect the user to the main page.</p>
</li>
<li><p>Check if the user chooses to logout then call the <code>$platform-&gt;logout()</code> function to logout and redirect to the main page to force a user login again..</p>
</li>
<li><p>Check which API was clicked and call the API accordingly as shown on the codes beside.</p>
</li>
</ul>
</div><div data-title="Run the demo app" data-file="../README.md" data-highlight="37-43" class="step"><h3 id="run-the-demo-app">Run the demo app</h3>
<pre><code>$ php -S localhost:5000
</code></pre><p>On a Web browser, enter <code>localhost:5000</code> then choose to login your production or sandbox account.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="../README.md" data-mode="markdown">IyBSaW5nQ2VudHJhbCBBdXRob3JpemF0aW9uIENvZGUgRmxvdyBPQXV0aCBpbiBQSFAKCiMjIE92ZXJ2aWV3CgpUaGUgT0F1dGggMi4wIGF1dGhvcml6YXRpb24gY29kZSBmbG93IChha2EgMy1sZWdnZWQgT0F1dGgpIHByb3RlY3RzIHVzZXJzIGluZm9ybWF0aW9uIGFuZCBsZXRzIHRoZW0gY29udHJvbCB3aGF0IHRoZXkgc2hhcmUgd2l0aCB5b3VyIGFwcC4gWW91IGFyZSByZXF1aXJlZCB0byB1c2UgdGhpcyBmbG93IGlmIHlvdXIgYXBwIGlzIGEgd2ViIGFwcCBhbmQgd2lsbCBiZSB1c2VkIGJ5IG1vcmUgdGhhbiBvbmUgdXNlci4KCiMjIyBDbG9uZSBhbmQgU2V0dXAgdGhlIHByb2plY3QKYGBgCiQgZ2l0IGNsb25lIGh0dHBzOi8vZ2l0aHViLmNvbS9yaW5nY2VudHJhbC10dXRvcmlhbHMvYXV0aG9yaXphdGlvbi1jb2RlLWZsb3ctb2F1dGgtcGhwLWRlbW8KCiQgY2QgYXV0aG9yaXphdGlvbi1jb2RlLWZsb3ctb2F1dGgtcGhwLWRlbW8KCiQgY3VybCAtc1MgaHR0cHM6Ly9nZXRjb21wb3Nlci5vcmcvaW5zdGFsbGVyIHwgcGhwCgokIHBocCBjb21wb3Nlci5waGFyIGluc3RhbGwKCiQgY3AgZW52aXJvbm1lbnQvZG90ZW52LXNhbmRib3ggZW52aXJvbm1lbnQvLmVudi1zYW5kYm94CgokIGNwIGVudmlyb25tZW50L2RvdGVudi1wcm9kdWN0aW9uIGVudmlyb25tZW50Ly5lbnYtcHJvZHVjdGlvbgoKYGBgCgojIyMgQ3JlYXRlIGFuIGFwcAoKKiBDcmVhdGUgYW4gYXBwbGljYXRpb24gYXQgW1JpbmdDZW50cmFsIERldmVsb3BlciBQb3J0YWxdKGh0dHBzOi8vZGV2ZWxvcGVyLnJpbmdjZW50cmFsLmNvbSkuCiogU2VsZWN0IGBTZXJ2ZXIvV2ViYCBmb3IgdGhlIFBsYXRmb3JtIHR5cGUuCiogQWRkIHRoZSBgUmVhZEFjY291bnRzYCwgYFJlYWRDYWxsTG9nYCBwZXJtaXNzaW9ucyBmb3IgdGhlIGFwcC4KKiBTcGVjaWZ5IHRoZSByZWRpcmVjdCBVcmkgYXMgYGh0dHA6Ly9sb2NhbGhvc3Q6NTAwMC9lbmdpbmUucGhwP29hdXRoMmNhbGxiYWNrYAoqIENvcHkgdGhlIENsaWVudCBpZCBhbmQgQ2xpZW50IHNlY3JldCBhbmQgYWRkIHRoZW0gdG8gdGhlIGAuZW52LVtlbnZpcm9ubWVudF1gIGZpbGUuCmBgYApSQ19DTElFTlRfSUQ9ClJDX0NMSUVOVF9TRUNSRVQ9CmBgYAoKSWYgeW91IGRvbid0IGtub3cgaG93IHRvIGNyZWF0ZSBhIFJpbmdDZW50cmFsIGFwcC4gQ2xpY2sgW2h0dHBzOi8vZGV2ZWxvcGVyLnJpbmdjZW50cmFsLmNvbS9saWJyYXJ5L2dldHRpbmctc3RhcnRlZC5odG1sXShoZXJlKSBmb3IgaW5zdHJ1Y3Rpb25zLgoKIyMjIFJ1biB0aGUgZGVtbwoKYGBgCiQgcGhwIC1TIGxvY2FsaG9zdDo1MDAwCmBgYAoKT24gYSBXZWIgYnJvd3NlciwgZW50ZXIgYGxvY2FsaG9zdDo1MDAwYCB0aGVuIGNob29zZSB0byBsb2dpbiB5b3VyIHByb2R1Y3Rpb24gb3Igc2FuZGJveCBhY2NvdW50LgoKIyMjIFJpbmdDZW50cmFsIERldmVsb3BlciBQb3J0YWwKVG8gc2V0dXAgYSBmcmVlIGRldmVsb3BlciBhY2NvdW50LCBjbGljayBbaGVyZV0oaHR0cHM6Ly9kZXZlbG9wZXIvcmluZ2NlbnRyYWwuY29tKQoKIyMgUmluZ0NlbnRyYWwgUEhQIFNESwpUaGUgU0RLIGlzIGF2YWlsYWJsZSBhdCBodHRwczovL2dpdGh1Yi5jb20vcmluZ2NlbnRyYWwvcmluZ2NlbnRyYWwtcGhwCg==</textarea>
<textarea class="saurus-file" data-file="../environment/dotenv-sandbox" data-mode="text">UkNfU0VSVkVSX1VSTD1odHRwczovL3BsYXRmb3JtLmRldnRlc3QucmluZ2NlbnRyYWwuY29tClJDX1JFRElSRUNUX1VSTD1odHRwOi8vbG9jYWxob3N0OjUwMDAvZW5naW5lLnBocD9vYXV0aDJjYWxsYmFjawpSQ19DTElFTlRfSUQ9ClJDX0NMSUVOVF9TRUNSRVQ9Cg==</textarea>
<textarea class="saurus-file" data-file="../index.php" data-mode="php">PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KICAgIDx0aXRsZT5SaW5nQ2VudHJhbCBBdXRob3JpemF0aW9uIENvZGUgRmxvdyBBdXRoZW50aWNhdGlvbjwvdGl0bGU+CjwvaGVhZD4KPGJvZHk+CiAgPGRpdiBhbGlnbj0ianVzdGlmeSI+CiAgICA8ZGl2IHN0eWxlPSJ3aWR0aDo1MDBweCI+CiAgICAgIDxwPgogICAgICAgIDxiPkltcG9ydGFudCE8L2I+IFlvdSBuZWVkIHRvIGVuYWJsZSBwb3AtdXAgZm9yIHRoaXMgd2ViIHNpdGUgaW4gb3JkZXIgdG8gbG9naW4geW91ciBSaW5nQ2VudHJhbCB2aWEgdGhpcyBXZWIgYXBwLgogICAgICA8L3A+CiAgICA8L2Rpdj4KICAgIDxoMz5DaG9vc2UgeW91ciBSaW5nQ2VudHJhbCBBY2NvdW50IEVudmlyb25tZW50PC9oMz48L2JyPgogICAgPGRpdj4KICAgICAgPGEgaHJlZj0naHR0cDovL2xvY2FsaG9zdDo1MDAwL2xvZ2luLnBocD9lbnY9cHJvZHVjdGlvbic+TG9naW4gUHJvZHVjdGlvbiBBY2NvdW50PC9hPiZuYnNwOyZuYnNwOyZuYnNwOwogICAgICA8YSBocmVmPSdodHRwOi8vbG9jYWxob3N0OjUwMDAvbG9naW4ucGhwP2Vudj1zYW5kYm94Jz5Mb2dpbiBTYW5kYm94IEFjY291bnQ8L2E+CiAgICA8L2Rpdj4KICA8L2Rpdj4KPC9ib2R5Pgo8L2h0bWw+Cg==</textarea>
<textarea class="saurus-file" data-file="../login.php" data-mode="php">PD9waHAKcmVxdWlyZV9vbmNlKF9fRElSX18gLiAnL3ZlbmRvci9hdXRvbG9hZC5waHAnKTsKdXNlIFJpbmdDZW50cmFsXFNES1xTREs7CgpzZXNzaW9uX3N0YXJ0KCk7CgokZW52X2ZpbGUgPSAiLi9lbnZpcm9ubWVudC8iOwppZiAoJF9SRVFVRVNUWydlbnYnXSA9PSAic2FuZGJveCIpewogICAkZW52X2ZpbGUgLj0gIi5lbnYtc2FuZGJveCI7Cn1lbHNlewogICAkZW52X2ZpbGUgLj0gIi5lbnYtcHJvZHVjdGlvbiI7Cn0KJF9TRVNTSU9OWydlbnYnXSA9ICRlbnZfZmlsZTsKJGRvdGVudiA9IG5ldyBEb3RlbnZcRG90ZW52KF9fRElSX18sICRlbnZfZmlsZSk7CiRkb3RlbnYtPmxvYWQoKTsKCiRyY3NkayA9IG5ldyBTREsoZ2V0ZW52KCdSQ19DTElFTlRfSUQnKSwgZ2V0ZW52KCdSQ19DTElFTlRfU0VDUkVUJyksIGdldGVudignUkNfU0VSVkVSX1VSTCcpKTsKJHBsYXRmb3JtID0gJHJjc2RrLT5wbGF0Zm9ybSgpOwoKJGF1dGhvcml6ZV91cmkgPSAkcGxhdGZvcm0tPmF1dGhVcmwoYXJyYXkoCiAgICAgICAgJ3JlZGlyZWN0VXJpJyA9PiBnZXRlbnYoJ1JDX1JFRElSRUNUX1VSTCcpLAogICAgICAgICdzdGF0ZScgPT4gJ2luaXRpYWxTdGF0ZScsCiAgICAgICAgJ2JyYW5kSWQnID0+ICcnLAogICAgICAgICdkaXNwbGF5JyA9PiAnJywKICAgICAgICAncHJvbXB0JyA9PiAnJwogICAgKSk7Cj8+CjwhRE9DVFlQRSBodG1sPgo8aHRtbD4KICA8aGVhZD4KICAgIDx0aXRsZT5SaW5nQ2VudHJhbCBBdXRob3JpemF0aW9uIENvZGUgRmxvdyBBdXRoZW50aWNhdGlvbjwvdGl0bGU+CiAgICA8c2NyaXB0PgogICAgICAgIHZhciBhdXRob3JpemVfdXJpID0gJzw/cGhwIGVjaG8gJGF1dGhvcml6ZV91cmk7ID8+JzsKICAgICAgICB2YXIgcmVkaXJlY3RVcmkgPSAnPD9waHAgZWNobyBnZXRlbnYoJ1JDX1JFRElSRUNUX1VSTCcpOyA/Pic7CiAgICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICAgICAgYXV0aFVyaTogYXV0aG9yaXplX3VyaSwKICAgICAgICAgICAgcmVkaXJlY3RVcmk6IHJlZGlyZWN0VXJpLAogICAgICAgIH0KICAgICAgICB2YXIgT0F1dGhDb2RlID0gZnVuY3Rpb24gKGNvbmZpZykgewogICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGNvbmZpZzsKICAgICAgICAgICAgdGhpcy5sb2dpblBvcHVwID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgdGhpcy5sb2dpblBvcHVwVXJpKHRoaXMuY29uZmlnWydhdXRoVXJpJ10sIHRoaXMuY29uZmlnWydyZWRpcmVjdFVyaSddKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmxvZ2luUG9wdXBVcmkgPSBmdW5jdGlvbiAoYXV0aFVyaSwgcmVkaXJlY3RVcmkpIHsKICAgICAgICAgICAgICAgIHZhciB3aW4gPSB3aW5kb3cub3BlbihhdXRoVXJpLCAnd2luZG93bmFtZTEnLCAnd2lkdGg9ODAwLCBoZWlnaHQ9NjAwJyk7CiAgICAgICAgICAgICAgICB2YXIgcG9sbE9BdXRoID0gd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAod2luLmRvY3VtZW50LlVSTC5pbmRleE9mKHJlZGlyZWN0VXJpKSAhPSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFySW50ZXJ2YWwocG9sbE9BdXRoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbi5jbG9zZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAidGVzdC5waHAiCiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sIDEwMCk7CgogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIHZhciBvYXV0aCA9IG5ldyBPQXV0aENvZGUoY29uZmlnKQogICAgICAgIG9hdXRoLmxvZ2luUG9wdXAoKQogICAgPC9zY3JpcHQ+CiAgPC9oZWFkPgogIDxib2R5Lz4KPC9odG1sPgo=</textarea>
<textarea class="saurus-file" data-file="../engine.php" data-mode="php">PD9waHAKcmVxdWlyZV9vbmNlKF9fRElSX18gLiAnL3ZlbmRvci9hdXRvbG9hZC5waHAnKTsKdXNlIFJpbmdDZW50cmFsXFNES1xIdHRwXEh0dHBFeGNlcHRpb247CnVzZSBSaW5nQ2VudHJhbFxTREtcSHR0cFxBcGlSZXNwb25zZTsKdXNlIFJpbmdDZW50cmFsXFNES1xTREs7CgpzZXNzaW9uX3N0YXJ0KCk7CgppZiAoaXNzZXQoJF9TRVNTSU9OWydlbnYnXSkpewogICAgJGVudl9maWxlID0gJF9TRVNTSU9OWydlbnYnXTsKICAgICRkb3RlbnYgPSBuZXcgRG90ZW52XERvdGVudihfX0RJUl9fLCAkZW52X2ZpbGUpOwogICAgJGRvdGVudi0+bG9hZCgpOwp9ZWxzZXsKICAgIHVuc2V0KCRfU0VTU0lPTlsndG9rZW5zJ10pOwogICAgaGVhZGVyKCJMb2NhdGlvbjogaHR0cDovL2xvY2FsaG9zdDo1MDAwIik7CiAgICBleGl0KCk7Cn0KCiRyY3NkayA9IG5ldyBTREsoZ2V0ZW52KCdSQ19DTElFTlRfSUQnKSwgZ2V0ZW52KCdSQ19DTElFTlRfU0VDUkVUJyksIGdldGVudignUkNfU0VSVkVSX1VSTCcpKTsKJHBsYXRmb3JtID0gJHJjc2RrLT5wbGF0Zm9ybSgpOwoKaWYgKGlzc2V0KCRfUkVRVUVTVFsnb2F1dGgyY2FsbGJhY2snXSkpewogICAgaWYgKGlzc2V0KCRfR0VUWydjb2RlJ10pKSB7CiAgICAgICRxcyA9ICRwbGF0Zm9ybS0+cGFyc2VBdXRoUmVkaXJlY3RVcmwoJF9TRVJWRVJbJ1FVRVJZX1NUUklORyddKTsKICAgICAgJHFzWyJyZWRpcmVjdFVyaSJdID0gZ2V0ZW52KCdSQ19SRURJUkVDVF9VUkwnKTsKICAgICAgdHJ5IHsKICAgICAgICAgICRwbGF0Zm9ybS0+bG9naW4oJHFzKTsKICAgICAgICAgIGVjaG8gIkxvZ2luIHN1Y2Nlc3MiOwogICAgICAgICAgJF9TRVNTSU9OWyd0b2tlbnMnXSA9ICRwbGF0Zm9ybS0+YXV0aCgpLT5kYXRhKCk7CiAgICAgIH0gY2F0Y2ggKFxSaW5nQ2VudHJhbFxTREtcSHR0cFxBcGlFeGNlcHRpb24gJGUpIHsKICAgICAgICAgIHByaW50ICdFeHBlY3RlZCBIVFRQIEVycm9yOiAnIC4gJGUtPmdldE1lc3NhZ2UoKSAuIFBIUF9FT0w7CiAgICAgIH0KICAgIH0KICAgIGV4aXQoKTsKfWVsc2V7CiAgICBpZiAoaXNzZXQoJF9TRVNTSU9OWyd0b2tlbnMnXSkpewogICAgICAgICRwbGF0Zm9ybS0+YXV0aCgpLT5zZXREYXRhKChhcnJheSkkX1NFU1NJT05bJ3Rva2VucyddKTsKICAgICAgICBpZiAoISRwbGF0Zm9ybS0+bG9nZ2VkSW4oKSkgewogICAgICAgICAgICBoZWFkZXIoIkxvY2F0aW9uOiBodHRwOi8vbG9jYWxob3N0OjUwMDAiKTsKICAgICAgICAgICAgZXhpdCgpOwogICAgICAgIH0KICAgICAgICBpZiAoaXNzZXQoJF9SRVFVRVNUWydsb2dvdXQnXSkpewogICAgICAgICAgICB1bnNldCgkX1NFU1NJT05bJ3Rva2VucyddKTsKICAgICAgICAgICAgJHBsYXRmb3JtLT5sb2dvdXQoKTsKICAgICAgICAgICAgaGVhZGVyKCJMb2NhdGlvbjogaHR0cDovL2xvY2FsaG9zdDo1MDAwIik7CiAgICAgICAgICAgIGV4aXQoKTsKICAgICAgICB9ZWxzZWlmIChpc3NldCgkX1JFUVVFU1RbJ2FwaSddKSl7CiAgICAgICAgICAgIGlmICgkX1JFUVVFU1RbJ2FwaSddID09ICJleHRlbnNpb24iKSB7CiAgICAgICAgICAgICAgICAkZW5kcG9pbnQgPSAiL3Jlc3RhcGkvdjEuMC9hY2NvdW50L34vZXh0ZW5zaW9uIjsKICAgICAgICAgICAgICAgIGNhbGxHZXRSZXF1ZXN0KCRwbGF0Zm9ybSwgJGVuZHBvaW50LCBudWxsKTsKICAgICAgICAgICAgfWVsc2VpZiAoJF9SRVFVRVNUWydhcGknXSA9PSAiZXh0ZW5zaW9uLWNhbGwtbG9nIikgewogICAgICAgICAgICAgICAgJGVuZHBvaW50ID0gIi9yZXN0YXBpL3YxLjAvYWNjb3VudC9+L2V4dGVuc2lvbi9+L2NhbGwtbG9nIjsKICAgICAgICAgICAgICAgICRwYXJhbXMgPSBhcnJheSgKICAgICAgICAgICAgICAgICAgICAnZnJvbURhdGUnID0+ICcyMDE4LTEyLTAxVDAwOjAwOjAwLjAwMFonLAogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgY2FsbEdldFJlcXVlc3QoJHBsYXRmb3JtLCAkZW5kcG9pbnQsICRwYXJhbXMpOwogICAgICAgICAgICB9ZWxzZWlmICgkX1JFUVVFU1RbJ2FwaSddID09ICJhY2NvdW50LWNhbGwtbG9nIikgewogICAgICAgICAgICAgICAgJGVuZHBvaW50ID0gIi9yZXN0YXBpL3YxLjAvYWNjb3VudC9+L2NhbGwtbG9nIjsKICAgICAgICAgICAgICAgICRwYXJhbXMgPSBhcnJheSgKICAgICAgICAgICAgICAgICAgICAnZnJvbURhdGUnID0+ICcyMDE4LTEyLTAxVDAwOjAwOjAwLjAwMFonLAogICAgICAgICAgICAgICAgICApOwogICAgICAgICAgICAgICAgY2FsbEdldFJlcXVlc3QoJHBsYXRmb3JtLCAkZW5kcG9pbnQsICRwYXJhbXMpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfWVsc2V7CiAgICAgICAgaGVhZGVyKCJMb2NhdGlvbjogaHR0cDovL2xvY2FsaG9zdDo1MDAwIik7CiAgICAgICAgZXhpdCgpOwogICAgfQp9CgpmdW5jdGlvbiBjYWxsR2V0UmVxdWVzdCgkcGxhdGZvcm0sICRlbmRwb2ludCwgJHBhcmFtcyl7CiAgICB0cnkgewogICAgICAgICRyZXNwID0gJHBsYXRmb3JtLT5nZXQoJGVuZHBvaW50LCAkcGFyYW1zKTsKICAgICAgICBlY2hvICRyZXNwLT50ZXh0KCk7CiAgICB9IGNhdGNoIChcUmluZ0NlbnRyYWxcU0RLXEh0dHBcQXBpRXhjZXB0aW9uICRlKSB7CiAgICAgICAgcHJpbnQgJ0V4cGVjdGVkIEhUVFAgRXJyb3I6ICcgLiAkZS0+Z2V0TWVzc2FnZSgpIC4gUEhQX0VPTDsKICAgIH0KfQo/Pgo=</textarea>
<textarea class="saurus-file" data-file="../test.php" data-mode="php">PCFET0NUWVBFIGh0bWw+CjxodG1sPgo8aGVhZD4KICAgIDxtZXRhIGNoYXJzZXQ9IlVURi04Ij4KPC9oZWFkPgo8Ym9keT4KPGI+PGEgaHJlZj0iaHR0cDovL2xvY2FsaG9zdDo1MDAwL2VuZ2luZS5waHA/bG9nb3V0Ij5Mb2dvdXQ8L2E+PC9iPgo8cD5DYWxsIEFQSXM8L3A+Cjx1bD4KICAgIDxsaT48YSBocmVmPSJodHRwOi8vbG9jYWxob3N0OjUwMDAvZW5naW5lLnBocD9hcGk9ZXh0ZW5zaW9uIj5SZWFkIEV4dGVuc2lvbiBJbmZvPC9hPjwvbGk+CiAgICA8bGk+PGEgaHJlZj0iaHR0cDovL2xvY2FsaG9zdDo1MDAwL2VuZ2luZS5waHA/YXBpPWV4dGVuc2lvbi1jYWxsLWxvZyI+UmVhZCBFeHRlbnNpb24gQ2FsbCBMb2c8L2E+PC9saT4KICAgIDxsaT48YSBocmVmPSJodHRwOi8vbG9jYWxob3N0OjUwMDAvZW5naW5lLnBocD9hcGk9YWNjb3VudC1jYWxsLWxvZyI+UmVhZCBBY2NvdW50IENhbGwgTG9nPC9hPjwvbGk+CjwvdWw+CjwvYm9keT4KPC9odG1sPgo=</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><div class="saurus-file-actions"><a href="https://github.com/https://github.com/ringcentral-tutorials/authorization-code-flow-oauth-php-demo" target="_blank" class="explorer-get-code"><i class="fa fa-lg fa-github-square"></i>View Code on GitHub</a><a href="https://github.com/https://github.com/ringcentral-tutorials/authorization-code-flow-oauth-php-demo/archive/master.zip" target="_blank" class="explorer-get-code"><i class="fa fa-lg icon-download"></i>Download Source Code</a></div></div></div></div><footer><div class="footer-content"><div class="footer-content-row layout-2-cols"><div class="footer-content-row-left"><div class="footer-logo"><a href="http://www.ringcentral.com"><span>Back to the main site</span></a></div></div><div class="footer-content-row-right"><ul class="footer-text-links"><li><a href="http://www.ringcentral.com/legal.html" target="_blank"><span>Legal</span></a></li><li><a href="http://www.ringcentral.com/security-statement.html" target="_blank"><span>Security Policy</span></a></li><li><a href="http://www.ringcentral.com/legal/privacy-policy.html" target="_blank"><span>Privacy Policy</span></a></li><li><a ng-href="https://devcommunity.ringcentral.com" target="_blank" href="https://devcommunity.ringcentral.com"><span>Community</span></a></li><li><a href="https://medium.com/ringcentral-developers" target="_blank"><span>Blog</span></a></li></ul></div></div><div class="footer-content-row footer-content-row-last layout-2-cols"><div class="footer-content-row-left"><span class="footer-copyright">© 1999-<span ng-bind="::main.nowObj|date:'yyyy'" class="footer-copyright-to ng-binding">2017</span> RingCentral, Inc. All rights reserved.</span></div><div class="footer-content-row-right"><div class="footer-image-links"><div class="footer-image-link footer-image-link-facebook"><a target="_blank" href="http://www.facebook.com/ringcentral"><i class="fa icon-facebook"></i></a></div><div class="footer-image-link footer-image-link-twitter"><a target="_blank" href="http://twitter.com/ringcentraldevs"><i class="fa icon-twitter"></i></a></div><div class="footer-image-link footer-image-link-google-plus"><a target="_blank" href="https://www.google.com/+ringcentral"><i class="fa icon-google_plus"></i></a></div><div class="footer-image-link footer-image-link-linkedin"><a target="_blank" href="http://www.linkedin.com/company/ringcentral"><i class="fa icon-linkedin"></i></a></div><div class="footer-image-link footer-image-link-youtube"><a target="_blank" href="http://www.youtube.com/ringcentral"><i class="fa icon-youtube"></i></a></div></div></div></div></div></footer></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="//code.jquery.com/ui/1.12.1/jquery-ui.js"></script><script>window.tutorialName="RingCentral Authorization Code Flow OAuth - PHP";</script><script src="viewsaurus.js"></script></body></html>